-- Cria a GUI
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "ShiftLockGui"

local ToggleButton = Instance.new("TextButton")
ToggleButton.Parent = ScreenGui
ToggleButton.Size = UDim2.new(0, 120, 0, 40)
ToggleButton.Position = UDim2.new(0, 10, 0.75, 0)
ToggleButton.Text = "Shift Lock OFF"
ToggleButton.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextScaled = true
ToggleButton.BorderSizePixel = 0

-- Variáveis principais
local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera
local runService = game:GetService("RunService")
local uis = game:GetService("UserInputService")
local shiftLocked = false
local connection

-- Função que trava o personagem olhando pra onde a câmera aponta
local function lockCharacterToCamera()
	if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end

	local root = player.Character.HumanoidRootPart
	local camLook = camera.CFrame.LookVector
	local flatLook = Vector3.new(camLook.X, 0, camLook.Z).Unit

	root.CFrame = CFrame.new(root.Position, root.Position + flatLook)
end

-- Alterna o Shift Lock
local function toggleShiftLock()
	shiftLocked = not shiftLocked
	ToggleButton.Text = shiftLocked and "Shift Lock ON" or "Shift Lock OFF"

	if shiftLocked then
		connection = runService.RenderStepped:Connect(lockCharacterToCamera)
	else
		if connection then connection:Disconnect() end
	end
end

-- Ativa o botão
ToggleButton.MouseButton1Click:Connect(toggleShiftLock)
